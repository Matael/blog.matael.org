<!DOCTYPE html>
<html lang="en">
	<head>
			<title>Thinking at Random</title>
		<meta charset="utf-8" />


		<meta name="tags" content="rst" />
		<meta name="tags" content="haum" />
		<meta name="tags" content="imported" />

		<link rel=stylesheet/less type=text/css media=screen href="/theme/css/style.css" />
		<link rel=stylesheet type=text/css media=screen href="/theme/css/pygment.css" />
		<script src="/theme/js/less.min.js"></script>
	</head>

	<body>
		<div id=logo><div id=logo-wrapper>
			<header>
				<h1><a href="/"<span class=overbar><span class=big>t</span>hinking <span class=accent>at</span> <span class=big>r</span>andom</span></a></h1>
			</header>
			<nav>
				<ul>
					<li><a href="/">Writing</a></li>
					<li><a href="https://github.com/Matael">Github</a></li>
					<li><a href="https://matael.org">About</a></li>
				</ul>
			</nav>
		</div></div>
		<div id=page>
<section id=content>
	<header>
		<h1>impress.js et Hovercraft</h1>
		
	</header>
	<article>

	<div id=meta>
		<p class=by-line>Published by 
				<a href="/author/matael.html" class=author>matael</a>
		</p>
		<p>On <time datetime="2015-01-04T11:28:41+01:00">Sun 04 January 2015</span></p>
		<ul class=tags>
				<li><a href="/tag/rst.html">rst</a></li>
				<li><a href="/tag/haum.html">haum</a></li>
				<li><a href="/tag/imported.html">imported</a></li>
		</ul>
	</div>
	<div id=article_body>
		<p>Faire des slides n'amuse personne... et moi le premier. Je <em>déteste</em> écrire des diapos et pire encore faire en sorte que
ça ait l'air joli.</p>
<p>Il y a quelques temps, <a class="reference external" href="http://vincent.jousse.org">Vincent</a> m'a parlé d'<a class="reference external" href="https://github.com/bartaz/impress.js">impress.js</a>. Cet outil permet en effet de réaliser une présentation en
HTML5/CSS3/JS en incluant des effets plutot sympas. Vous trouverez sur son blog <a class="reference external" href="http://vincent.jousse.org/comment-creer-une-presentation-orale-qui-en-jette-a-tous-les-coups-avec-exemple/">un article à propos d'impress.js</a>.</p>
<p>Voilà qui semble prometteur mais un problème subsiste : la présentation doit être écrite en HMTL... certes, on aime pas
faire des slides, mais taper du HTML n'a rien de particulièrement excitant...</p>
<p>Après une courte recherche, j'ai déniché <a class="reference external" href="http://hovercraft.readthedocs.org/en/1.0/">Hovercraft</a>. Cet outil écrit en python présente un intéret majeur : il vous
permet d'écrire vos slides en <a class="reference external" href="http://docutils.sourceforge.net/rst.html">ReST</a> puis de les transformer en une page impress.js.</p>
<p>Voyons comment ça tourne sous le capot.</p>
<div class="section" id="installation">
<h2>Installation</h2>
<p>Rien de plus simple :</p>
<div class="highlight"><pre><span></span>sudo apt-get install libxml2-dev libxslt1-dev
sudo pip install hovercraft
</pre></div>
</div>
<div class="section" id="basics">
<h2>Basics</h2>
<p>Rien de bien compliqué : vous commencez par donner un titre, déterminer la durée des transistions (en millisecondes) et éventuellement un
CSS <em>via</em> quelques directives :</p>
<div class="highlight"><pre><span></span><span class="nc">:title:</span> <span class="nf">Votre titre</span>
<span class="nc">:data-transition-duration:</span> <span class="nf">1500</span>
<span class="nc">:css:</span> <span class="nf">presentation.css</span>
</pre></div>
<p>Ensuite, vous passez aux slides en eux mêmes :</p>
<ul class="simple">
<li>les transitions sont indiqués par 4 tirets seuls sur une ligne (avec une ligne blanche avant et après);</li>
<li>suivent les éventuelles directives de position pour le slide;</li>
<li>enfin, le texte du slide lui même.</li>
</ul>
<p>Par exemple :</p>
<div class="highlight"><pre><span></span>----

<span class="nc">:data-x:</span> <span class="nf">500</span>
<span class="nc">:data-y:</span> <span class="nf">42</span>

<span class="gh">Premier Slide</span>
<span class="gh">=============</span>

Et mon texte ici

----

<span class="nc">:data-rotate-z:</span> <span class="nf">r90</span>

<span class="gh">Second slide</span>
<span class="gh">============</span>

Et la suite du texte
</pre></div>
<p>La présentation ne doit pas finir sur une transition</p>
<div class="section" id="directives-de-position">
<h3>Directives de position</h3>
<p>Les directives sont décrites dans la <a class="reference external" href="http://hovercraft.readthedocs.org/en/1.0/presentations.html#impress-js-fields">doc</a>.</p>
<p>Il existe notament les suivantes pour positioner le slide ::</p>
<pre class="literal-block">
:data-x:
:data-y:
:data-z:
</pre>
<p>Ainsi que celles ci qui permettent de faire tourner la vue autour d'un axe (en degrés) ::</p>
<pre class="literal-block">
:data-rotate-x:
:data-rotate-y:
:data-rotate-z:
</pre>
<p>Et <tt class="docutils literal"><span class="pre">:data-scale:</span></tt> qui permet les effets de zoom.</p>
<p>On peut les utiliser suivies d'un nombre. Les coordonnées spécifiées sont absolue, sauf si le nombre (positif ou
négatif) est précédé d'un <tt class="docutils literal">r</tt>.</p>
</div>
<div class="section" id="directives-rest">
<h3>Directives ReST</h3>
<p>D'après ce que j'ai vu, toutes les directives ReST sont reconnues y compris ::</p>
<pre class="literal-block">
.. code-block:: lang

    sourcecode
</pre>
<p>Pour le code source coloré (<em>via</em> <a class="reference external" href="http://pygments.org">pygments</a>).</p>
</div>
<div class="section" id="compilation">
<h3>Compilation</h3>
<p>Pour compiler :</p>
<div class="highlight"><pre><span></span>$ hovercraft fichier.rst repertoire_cible/
</pre></div>
<p>Si le répertoire n'existe pas, il sera créé. Vous y trouverez divers dossiers et fichiers externes ainsi qu'un
<tt class="docutils literal">index.html</tt>. Ouvrez le pour accéder à la présentation elle-même.</p>
</div>
</div>
<div class="section" id="style">
<h2>Style</h2>
<p>Il peut être intéressant de rajouter un peu de CSS à la présentation pour passer du morne N&amp;B par défaut à quelque chose
de plus agréable.</p>
<p>La directive <tt class="docutils literal">:css:</tt> à placer au début permet cela, ainsi que le <em>flag</em> <tt class="docutils literal"><span class="pre">-c</span> CSSFILE</tt> ou <tt class="docutils literal"><span class="pre">--css</span> CSSFILE</tt>
d'Hovercraft.</p>
<p>Par exemple, un fichier comme celui ci permet un style plus sombre et doux que le style de base :</p>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Armata&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(../</span><span class="nt">fonts</span><span class="o">/</span><span class="nt">Armata-Regular</span><span class="p">.</span><span class="nc">ttf</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">&quot;truetype&quot;</span><span class="o">);</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Bitter&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(../</span><span class="nt">fonts</span><span class="o">/</span><span class="nt">Bitter-Regular</span><span class="p">.</span><span class="nc">ttf</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">&quot;truetype&quot;</span><span class="o">);</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;BitterItalic&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(../</span><span class="nt">fonts</span><span class="o">/</span><span class="nt">Bitter-Italic</span><span class="p">.</span><span class="nc">ttf</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">&quot;truetype&quot;</span><span class="o">);</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;BitterBold&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(../</span><span class="nt">fonts</span><span class="o">/</span><span class="nt">Bitter-Bold</span><span class="p">.</span><span class="nc">ttf</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">&quot;truetype&quot;</span><span class="o">);</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#14282C</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#60959F</span><span class="p">;</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;Armata&quot;</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mf">1.5</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;BitterBold&quot;</span><span class="p">;</span>
    <span class="n">text-italic</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;Bitter&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">blockquote</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;BitterItalic&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="o">,</span> <span class="nt">em</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#91C5CF</span><span class="p">;</span>
    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>Il faut savoir que d'autres feuilles de style sont aussi inclues (notament pour la console de présentation, nous y
reviendrons).</p>
<div class="section" id="style-sur-un-slide-particulier">
<h3>Style sur un slide particulier</h3>
<p>Pour disposer d'un id spécifique à un slide, il suffit d'ajouter en début de slide (juste après la transition
précédente) la directive suivante :</p>
<div class="highlight"><pre><span></span><span class="nc">:id:</span> <span class="nf">id_voulu</span>
</pre></div>
<p>L'id sera ajouté à la compilation et vous pourrez l'utiliser dans le CSS.</p>
</div>
<div class="section" id="fichier-externes">
<h3>Fichier externes</h3>
<p>Il est possible de lier des fichiers externes (css, images ou autres) par diverses directives :</p>
<div class="highlight"><pre><span></span><span class="nc">:css:</span> <span class="nf">path/to/css</span>

<span class="cp">.. ou</span>

<span class="p">..</span> <span class="ow">image</span><span class="p">::</span> path/to/image.jpg
</pre></div>
<p>Si les chemins vers ces fichiers sont <strong>relatifs</strong> alors il seront copiés dans la <tt class="docutils literal">TARGET_DIR</tt> à la compilation, le
chemin spécifié sera conservé dans le <tt class="docutils literal">index.html</tt> généré.</p>
</div>
<div class="section" id="notes">
<h3>Notes</h3>
<p>Il est possible d'ajouter des notes de présentation qui seront affichées dans la console (on y revient).</p>
<p>Ces notes sont ajoutées via :</p>
<div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">note</span><span class="p">::</span>

    Texte de la note
    sur
    plusieurs lignes
    au besoin :)
</pre></div>
</div>
</div>
<div class="section" id="extras">
<h2>Extras</h2>
<p>Quelques trucs en plus qu'il peut être bon de connaitre.</p>
<div class="section" id="templates">
<h3>Templates</h3>
<p>Hovercraft accède l'argument <tt class="docutils literal"><span class="pre">-t</span></tt> ou <tt class="docutils literal"><span class="pre">--template</span></tt> qui attend un fichier .cfg qui servira de template de
configuration. Un exemple pour ce fichier (tiré de la documentation) :</p>
<div class="highlight"><pre><span></span><span class="k">[hovercraft]</span>
<span class="na">template</span> <span class="o">=</span> <span class="s">template.xsl</span>

<span class="na">css</span> <span class="o">=</span> <span class="s">css/screen.css</span>
<span class="s">      css/impressConsole.css</span>

<span class="na">css-print</span> <span class="o">=</span> <span class="s">css/print.css</span>

<span class="na">js-header</span> <span class="o">=</span> <span class="s">js/dateinput.js</span>

<span class="na">js-body</span> <span class="o">=</span> <span class="s">js/impress.js</span>
<span class="s">          js/impressConsole.js</span>
<span class="s">          js/hovercraft.js</span>

<span class="na">resource</span> <span class="o">=</span> <span class="s">images/back.png</span>
<span class="s">           images/forward.png</span>
<span class="s">           images/up.png</span>
<span class="s">           images/down.png</span>
</pre></div>
<p>Ce fichier permet notament de chaner le .xls qui contrôle la mise en page.
De ce côté, le plus simple reste la modification du fichier par défaut : <tt class="docutils literal">hovercraft/templates/default/template.xsl</tt>.</p>
<p>Plus d'infos <a class="reference external" href="http://hovercraft.readthedocs.org/en/1.0/templates.html#the-template-file">ici</a>.</p>
</div>
<div class="section" id="console-de-presentation">
<h3>Console de présentation</h3>
<p>Hovercraft inclus à la présentation finale une console (<a class="reference external" href="https://github.com/regebro/impress-console">impressConsole.js</a>) qui permet de contrôler la présentation.
Celle-ci comprend :</p>
<ul class="simple">
<li>le slide en cours,</li>
<li>le slide suivant,</li>
<li>une horloge,</li>
<li>un timer (remis à zéro en cliquant dessus),</li>
<li>des liens pour le changement de slide en avant ou en arrière (les flèches et la barre espace marchent aussi),</li>
<li>les notes concernant le slide en cours.</li>
</ul>
<p>J'essaierais de modifier un peu cette console pour qu'elle soit plus agréable qu'elle ne l'est actuellement.</p>
</div>
<div class="section" id="options-en-lignes-de-commange">
<h3>Options en lignes de commange</h3>
<p>Voilà pour finir 3 options qui peuvent s'avérer utiles :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-a</span></tt> ou <tt class="docutils literal"><span class="pre">--auto-console</span></tt> force l'affichage de la console dès le début (utile pour répèter),</li>
<li><tt class="docutils literal"><span class="pre">-s</span></tt> ou <tt class="docutils literal"><span class="pre">--skip-help</span></tt> désactive l'affichage de l'aide,</li>
<li><tt class="docutils literal"><span class="pre">-n</span></tt> ou <tt class="docutils literal"><span class="pre">--skip-notes</span></tt> désactive l'inclusion des notes de présentation</li>
</ul>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>Hovercraft et impress.js forment un tandem prometteur et efficace quand on veut créer des diaporamas sans s'encombrer
d'une GUI ni manger du LaTeX.</p>
<p>Il est à noter que toutes les possibilitées d'impress.js ne sont pas transcrites dans Hovercraft (la doc d'impress.js
est dans le code source de la page de présentation, ce qui la rend pas sympa à lire...).</p>
<p>Certaines choses sont probablement à améliorer mais c'est déjà un excellent début.</p>
<p><strong>EDIT :</strong> il existe aussi <a class="reference external" href="http://slid.es/">slid.es</a>. Merci à <a class="reference external" href="https://twitter.com/fblain">&#64;fblain</a> pour l'info</p>
</div>

	</article>
</section>
		</div>
		<div class=clear>&nbsp;</div>
		<footer>
			<p id=legal>Proudly powered by Pelican &mdash; 2017 &mdash; Mathieu (matael) Gaborit</p>
		</footer>
	</body>
</html>