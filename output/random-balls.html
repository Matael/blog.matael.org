<!DOCTYPE html>
<html lang="en">
	<head>
			<title>Thinking at Random</title>
		<meta charset="utf-8" />


		<meta name="tags" content="processing" />
		<meta name="tags" content="imported" />

		<link rel=stylesheet/less type=text/css media=screen href="/theme/css/style.css" />
		<link rel=stylesheet type=text/css media=screen href="/theme/css/pygment.css" />
		<script src="/theme/js/less.min.js"></script>
	</head>

	<body>
		<div id=logo><div id=logo-wrapper>
			<header>
				<h1><a href="/"<span class=overbar><span class=big>t</span>hinking <span class=accent>at</span> <span class=big>r</span>andom</span></a></h1>
			</header>
			<nav>
				<ul>
					<li><a href="/">Writing</a></li>
					<li><a href="https://github.com/Matael">Github</a></li>
					<li><a href="https://matael.org">About</a></li>
				</ul>
			</nav>
		</div></div>
		<div id=page>
<section id=content>
	<header>
		<h1>Random balls</h1>
		
	</header>
	<article>

	<div id=meta>
		<p class=by-line>Published by 
				<a href="/author/matael.html" class=author>matael</a>
		</p>
		<p>On <time datetime="2015-01-04T11:20:58+01:00">Sun 04 January 2015</span></p>
		<ul class=tags>
				<li><a href="/tag/processing.html">processing</a></li>
				<li><a href="/tag/imported.html">imported</a></li>
		</ul>
	</div>
	<div id=article_body>
		<p>Comme je l'avais dit dans un <a class="reference external" href="/writing/processing">billet
précédent</a>, j'ai continué à tester
<strong>processing</strong>, voici donc un autre de mes essais...</p>
<div class="section" id="l-idee">
<h2>L'idée</h2>
<p>J'ai voulu tester les fonctions d'<strong>export png</strong> et de <strong>réaction au
clavier</strong> ainsi que d'utiliser des couleurs <strong>rgba</strong> et de jouer sur la
<strong>superpositions des couches de dessin</strong>.</p>
<div class="section" id="la-figure-visee">
<h3>La figure visée</h3>
<p>Une figure répondant à ce que j'attend serait un truc comme ça :</p>
<p><img alt="Exemple de figure finale" src="/images/random_balls/final1.png" style="width: 600px;" /></p>
<p>Vous en trouverez d'autre dans les liens en bas.</p>
<div class="section" id="des-boules">
<h4>Des boules...</h4>
<p>Le but est d'arriver à une image où sont posées des <em>&quot;boules&quot;</em> (notées
<em>balls</em> dans le programme) de ce genre :</p>
<p><img alt="Ball" src="/images/random_balls/ball_alone.png" style="width: 300px;" /></p>
<p><strong>Note :</strong> même si ça se voit pas des masses sur l'image, la partie
bleue de ces balls n'est <strong>pas opaque</strong> mais transparente : sinon, c'est
moche quand 2 balls se chevauchent.</p>
</div>
<div class="section" id="et-des-lignes">
<h4>...et des lignes</h4>
<p>Les centres (le petit rond blanc au centre) de boules proches doivent se
relier par une ligne blanche passant <strong>sous</strong> les autres boules (sinon,
on voit plus rien, croyez moi).</p>
<p>Voilà à quoi sont censée ressembler 2 balls liées :</p>
<p><img alt="Balls liées" src="/images/random_balls/balls_linked.png" style="width: 300px;" /></p>
</div>
</div>
<div class="section" id="reference-en-local">
<h3>Référence en local</h3>
<p>J'ai aussi découvert ça en cherchant un moyen de compiler mes programmes
en ligne de commande (ça par contre, je l'ai pas trouvé) : on a une
copie de la référence en ligne au format HTML dans le tarball qu'on
télécharge sur leur site. Vous pourez la trouver là :</p>
<div class="highlight"><pre><span></span>processing/modes/java/reference/index.html
</pre></div>
</div>
</div>
<div class="section" id="le-code-fractionne">
<h2>Le code fractionné!</h2>
<p>On va procèder par étapes histoire que tout le monde suive, mais
globalement, y'a rien de super compliqué</p>
<div class="section" id="variables-globales">
<h3>Variables globales</h3>
<p>Je sens que certains vont bondir au plafond, seulement, j'ai pas envie
de m'emmerder avec des prototypes super longs. On va donc utiliser
quelques variables globables pour nous simplifier la tache :</p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nb_balls</span> <span class="o">=</span> <span class="mi">90</span><span class="o">;</span>       <span class="c1">// Nombre de balls à dessiner</span>
<span class="kt">int</span> <span class="n">ball_size_min</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>  <span class="c1">// taille minimum d&#39;une boule (le centre fait 10*10)</span>
<span class="kt">int</span> <span class="n">ball_size_max</span> <span class="o">=</span> <span class="mi">225</span><span class="o">;</span> <span class="c1">// taille max</span>
<span class="kt">float</span> <span class="n">line_factor</span> <span class="o">=</span> <span class="mf">1.1</span><span class="o">;</span> <span class="c1">// facteur de proximité</span>

<span class="c1">// le tableau qui contiendra les coordonnées et la taille de chaque ball</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">balls</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">nb_balls</span><span class="o">][</span><span class="mi">3</span><span class="o">];</span>
</pre></div>
<p>Le <strong>facteur de proximité</strong> nous permettra de savoir si deux boules sont
proches ou non.</p>
</div>
<div class="section" id="setup">
<h3><tt class="docutils literal">setup</tt></h3>
<p>La fonction <tt class="docutils literal">setup</tt> est triviale :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">900</span><span class="o">,</span><span class="mi">450</span><span class="o">);</span> <span class="c1">// la zone de dessin fait 900*450</span>
    <span class="n">noLoop</span><span class="o">();</span>      <span class="c1">// on exécute draw() qu&#39;une fois de suite</span>
    <span class="n">noStroke</span><span class="o">();</span>    <span class="c1">// on n&#39;affiche pas de pointeur</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="init-balls">
<h3><tt class="docutils literal">init_balls</tt></h3>
<p>On va initialiser notre tableau de balls à travers une fonction :
<tt class="docutils literal">init_balls()</tt>.</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">init_balls</span><span class="o">(){</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">));</span>  <span class="c1">// x pos</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">height</span><span class="o">));</span> <span class="c1">// y pos</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">25</span><span class="o">,</span><span class="mi">125</span><span class="o">+</span><span class="mi">1</span><span class="o">));</span>  <span class="c1">// taille de la ball</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="draw-ball">
<h3><tt class="docutils literal">draw_ball</tt></h3>
<p>Les fonctions, caybien, alors on va en faire une pour tracer les balls
et rendre le code un peu plus lisible.</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">draw_ball</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">ball_size</span><span class="o">){</span>
    <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span> <span class="c1">// remplissage en blanc</span>
    <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="c1">// on trace le centre</span>
    <span class="n">fill</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">56</span><span class="o">,</span> <span class="mi">70</span><span class="o">);</span> <span class="c1">// remplissage en bleu translucide</span>
    <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">ball_size</span><span class="o">,</span> <span class="n">ball_size</span><span class="o">);</span> <span class="c1">// on trace l&#39;extérieur de la ball</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="draw-lines">
<h3><tt class="docutils literal">draw_lines</tt></h3>
<p>Cette fonction est probablement la plus compliquée. En effet, on a dit
qu'on ne voulait tracer des lignes qu'entre les balls <strong>proches</strong>.</p>
<p>On a défini tout à l'heure, une variable <tt class="docutils literal">line_factor</tt> et on a dit
qu'elle servirait pour <em>savoir si deux boules sont proches ou non</em>. On
va considérer qu'une ball est proche d'une autre si <strong>la distance entre
leurs centres est inférieure ou égale à
``line_factor*taille de la première``</strong>.</p>
<p>Nous savons récupérer la taille d'une ball, reste à calculer la distance
entre 2 balls. Voilà la formule pour la distance entre 2 points
(pythagore powaa) :</p>
<img alt="" class="align-center" src="/static/images/random_balls/formule_distance.png" style="width: 300px;" />
<p>Voilà le code de cette fonction :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">draw_lines</span><span class="o">(){</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span> <span class="c1">// x pos pour l&#39;iteration</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span> <span class="c1">// y pos ...</span>
    <span class="kt">int</span> <span class="n">s</span><span class="o">;</span> <span class="c1">// size ...</span>
    <span class="kt">float</span> <span class="n">distance</span><span class="o">;</span> <span class="c1">// distance ...</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="c1">// pour chaque ball on récupère coordonnées et taille</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">];</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">];</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span><span class="n">nb_balls</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="c1">// pour chaque ball, on calcule la distance avec la première</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="o">(</span><span class="n">pow</span><span class="o">(</span><span class="n">x</span> <span class="o">-</span><span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span><span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="n">pow</span><span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">],</span><span class="mi">2</span><span class="o">));</span>
            <span class="c1">// si elles ne sont pas exactement superposée et qu&#39;elles sont proches</span>
            <span class="k">if</span><span class="o">(!((</span><span class="n">x</span> <span class="o">==</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">y</span> <span class="o">==</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">]))</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">s</span><span class="o">*</span><span class="n">line_factor</span><span class="o">)){</span>
                <span class="c1">// on trace la ligne entre leurs centres</span>
                <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
                <span class="n">line</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">]);</span>
                <span class="n">noStroke</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="combo-draw-full-frame">
<h3>Combo <tt class="docutils literal">draw_full_frame</tt></h3>
<p>Cette fonction se charge de dessiner l'image complète (bakground + balls
+ lines). Elle n'est qu'un combo des autres, dans le bon ordre :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">draw_full_frame</span><span class="o">(){</span>
    <span class="n">background</span><span class="o">(</span><span class="mi">70</span><span class="o">);</span> <span class="c1">// d&#39;abord le BG</span>
    <span class="n">draw_lines</span><span class="o">();</span>   <span class="c1">// puis les lignes</span>
    <span class="c1">// enfin, les balls</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">draw_ball</span><span class="o">(</span><span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">]);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>L'ordre est très important car les dessins se superposent. On cherche
bien à obtenir la superposition suivante :</p>
<pre class="literal-block">
+-----------------------+  A
|        BALLS          |  |
+-----------------------+  |
+-----------------------+  | Sens d'appel des
|        LINES          |  |   Fonctions
+-----------------------+  |
+-----------------------+  |
|      BACKGROUND       |  |
+-----------------------+  |
</pre>
</div>
<div class="section" id="la-reaction-au-clavier">
<h3>La réaction au clavier</h3>
<p>Si vous vous souvenez bien, un des codes sources de l'article précédent
contenait :</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">(</span><span class="n">mousePressed</span><span class="o">){</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
<p>Cette conditionnelle permettait de réagir au clic de souris.</p>
<p>Il faut savoir deux choses :</p>
<ol class="arabic simple">
<li><tt class="docutils literal">if (keyPressed) {}</tt> permet de réagir aux frappes sur le clavier</li>
<li>On peut utiliser des fonctions plutot que de simples conditionnelles
pour réagir aux évènements. Par exemple :</li>
</ol>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">(){</span> <span class="c1">// truc à faire après un clic }</span>

<span class="c1">// et</span>

<span class="kt">void</span> <span class="nf">keyPressed</span><span class="o">(){</span> <span class="c1">// truc à faire après la frappe }</span>
</pre></div>
<p>Bien entendu, il faut pouvoir réagir <strong>en fonction de la touche ou du
bouton appuyé</strong>, <strong>procssing</strong> met donc à notre disposition 2 variables
: <tt class="docutils literal">mouseButton</tt> et <tt class="docutils literal">key</tt> qui contiennent respectivement :</p>
<ul class="simple">
<li>le bouton utilisé : <tt class="docutils literal">LEFT</tt>, <tt class="docutils literal">CENTER</tt> ou <tt class="docutils literal">RIGHT</tt></li>
<li>la touche enfoncé : un caractère de la table ASCII</li>
</ul>
<p>Notons que des fonctions du genre existent pour le relachement d'une
touche/ d'un bouton, un mouvement de la souris, et mouvement avec
maintien (drag).</p>
<p>Voici donc la fonction pour réagir au clavier :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">keyPressed</span><span class="o">(){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;r&#39;</span> <span class="o">||</span> <span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;R&#39;</span><span class="o">){</span>
        <span class="n">redraw</span><span class="o">();</span> <span class="c1">// on génére une nouvelle figure</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;s&#39;</span> <span class="o">||</span> <span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;S&#39;</span><span class="o">){</span>
        <span class="n">saveFrame</span><span class="o">(</span><span class="s">&quot;frame-####.png&quot;</span><span class="o">);</span> <span class="c1">// on enregistre la figure courante</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>Vous aurez compris le comportement :</p>
<ul class="simple">
<li>appui sur <strong>r</strong> ou <strong>R</strong> : nouvelle figure aléatoire</li>
<li>appui sur <strong>s</strong> ou <strong>S</strong> : enregistrement de la figure courante</li>
</ul>
<div class="section" id="redraw">
<h4><tt class="docutils literal">redraw</tt></h4>
<p>Cette fonction ré-éxecute la fonction <tt class="docutils literal">draw()</tt> une fois (souvenez
vous, on avait supprimé l'exécution en boucle dans <tt class="docutils literal">setup()</tt>.</p>
</div>
<div class="section" id="saveframe">
<h4><tt class="docutils literal">saveFrame</tt></h4>
<p><tt class="docutils literal">saveFrame</tt> et sa copine <tt class="docutils literal">save</tt> permettent d'enregistrer l'image
courante. La différence ?</p>
<p><tt class="docutils literal">save</tt> enregistre une et une seule image (elle détruit la précédente
si on l'appel deux fois ou plus).</p>
<p><tt class="docutils literal">saveFrame</tt> enregistre autant de nouvelle images qu'il faut en les
numérotant à la place des <tt class="docutils literal"><span class="pre">####</span></tt>.</p>
</div>
</div>
<div class="section" id="draw">
<h3><tt class="docutils literal">draw</tt></h3>
<p>La fonction <tt class="docutils literal">draw</tt> est plus que triviale. Elle se content
d'initialiser le tableau et de tracer la première frame.</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="n">init_balls</span><span class="o">();</span>
    <span class="n">draw_full_frame</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="le-code-complet">
<h2>Le code complet!</h2>
<p>Le code tout à la suite :</p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nb_balls</span> <span class="o">=</span> <span class="mi">90</span><span class="o">;</span>       <span class="c1">// Nombre de balls à dessiner</span>
<span class="kt">int</span> <span class="n">ball_size_min</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>  <span class="c1">// taille minimum d&#39;une boule (le centre fait 10*10)</span>
<span class="kt">int</span> <span class="n">ball_size_max</span> <span class="o">=</span> <span class="mi">225</span><span class="o">;</span> <span class="c1">// taille max</span>
<span class="kt">float</span> <span class="n">line_factor</span> <span class="o">=</span> <span class="mf">1.1</span><span class="o">;</span> <span class="c1">// facteur de proximité</span>

<span class="c1">// le tableau qui contiendra les coordonnées et la taille de chaque ball</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">balls</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">nb_balls</span><span class="o">][</span><span class="mi">3</span><span class="o">];</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">900</span><span class="o">,</span><span class="mi">450</span><span class="o">);</span> <span class="c1">// la zone de dessin fait 900*450</span>
    <span class="n">noLoop</span><span class="o">();</span>      <span class="c1">// on exécute draw() qu&#39;une fois de suite</span>
    <span class="n">noStroke</span><span class="o">();</span>    <span class="c1">// on n&#39;affiche pas de pointeur</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">init_balls</span><span class="o">(){</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">));</span>  <span class="c1">// x pos</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">height</span><span class="o">));</span> <span class="c1">// y pos</span>
        <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">25</span><span class="o">,</span><span class="mi">125</span><span class="o">+</span><span class="mi">1</span><span class="o">));</span>  <span class="c1">// taille de la ball</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw_ball</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">ball_size</span><span class="o">){</span>
    <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span> <span class="c1">// remplissage en blanc</span>
    <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="c1">// on trace le centre</span>
    <span class="n">fill</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">56</span><span class="o">,</span> <span class="mi">70</span><span class="o">);</span> <span class="c1">// remplissage en bleu translucide</span>
    <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">ball_size</span><span class="o">,</span> <span class="n">ball_size</span><span class="o">);</span> <span class="c1">// on trace l&#39;extérieur de la ball</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw_lines</span><span class="o">(){</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span> <span class="c1">// x pos pour l&#39;iteration</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span> <span class="c1">// y pos ...</span>
    <span class="kt">int</span> <span class="n">s</span><span class="o">;</span> <span class="c1">// size ...</span>
    <span class="kt">float</span> <span class="n">distance</span><span class="o">;</span> <span class="c1">// distance ...</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="c1">// pour chaque ball on récupère coordonnées et taille</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">];</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">];</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span><span class="n">nb_balls</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="c1">// pour chaque ball, on calcule la distance avec la première</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="o">(</span><span class="n">pow</span><span class="o">(</span><span class="n">x</span> <span class="o">-</span><span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span><span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="n">pow</span><span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">],</span><span class="mi">2</span><span class="o">));</span>
            <span class="c1">// si elles ne sont pas exactement superposée et qu&#39;elles sont proches</span>
            <span class="k">if</span><span class="o">(!((</span><span class="n">x</span> <span class="o">==</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">y</span> <span class="o">==</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">]))</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">s</span><span class="o">*</span><span class="n">line_factor</span><span class="o">)){</span>
                <span class="c1">// on trace la ligne entre leurs centres</span>
                <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
                <span class="n">line</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="mi">1</span><span class="o">]);</span>
                <span class="n">noStroke</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw_full_frame</span><span class="o">(){</span>
    <span class="n">background</span><span class="o">(</span><span class="mi">70</span><span class="o">);</span> <span class="c1">// d&#39;abord le BG</span>
    <span class="n">draw_lines</span><span class="o">();</span>   <span class="c1">// puis les lignes</span>
    <span class="c1">// enfin, les balls</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_balls</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">draw_ball</span><span class="o">(</span><span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">],</span> <span class="n">balls</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">]);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">keyPressed</span><span class="o">(){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;r&#39;</span> <span class="o">||</span> <span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;R&#39;</span><span class="o">){</span>
        <span class="n">redraw</span><span class="o">();</span> <span class="c1">// on génére une nouvelle figure</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;s&#39;</span> <span class="o">||</span> <span class="n">key</span> <span class="o">==</span> <span class="sc">&#39;S&#39;</span><span class="o">){</span>
        <span class="n">saveFrame</span><span class="o">(</span><span class="s">&quot;frame-####.png&quot;</span><span class="o">);</span> <span class="c1">// on enregistre la figure courante</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="n">init_balls</span><span class="o">();</span>
    <span class="n">draw_full_frame</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
<p>Pour les flemmards du copier-coller : <a class="reference external" href="/static/files/random_balls/random_balls.pde">das
code</a> !</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>Voilà donc un second article sur <strong>processing</strong> qui s'achève avec
l'exploration que nouvelles foncions...</p>
<p>J'espère au moins que ça vous aura appris des trucs ;)</p>
<p>Une amélioration faisable au niveau de ce code serait de le rendre plus
intéractif. On pourrait considérer chaque point commme un objet et
modifier leur taille au passage de la souris par exemple.</p>
<p>Je pense qu'en cherchant bien, on trouverait plein d'autres choses
inutiles et passionantes à ajouter au programme...</p>
<p>Bonne chance !</p>
</div>
<div class="section" id="quelques-docs">
<h2>Quelques docs</h2>
<p>Voilà les codes utilisés pour la génération des 2 premières images et un
lien vers le code final :</p>
<ul class="simple">
<li>Code Final <a class="reference external" href="/static/files/random_balls/random_balls.pde">das code</a></li>
<li><a class="reference external" href="/static/files/random_balls/alone.pde">Ball Alone</a></li>
<li><a class="reference external" href="/static/files/random_balls/linked.pde">Ball Linked</a></li>
<li><a class="reference external" href="/static/images/random_balls/final2.png_">Exemple de figure finale</a></li>
<li><a class="reference external" href="/static/images/random_balls/final3.png_">Un autre exemple de figure finale</a></li>
</ul>
</div>

	</article>
</section>
		</div>
		<div class=clear>&nbsp;</div>
		<footer>
			<p id=legal>Proudly powered by Pelican &mdash; 2017 &mdash; Mathieu (matael) Gaborit</p>
		</footer>
	</body>
</html>