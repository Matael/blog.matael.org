<!DOCTYPE html>
<html lang="en">
	<head>
			<title>Thinking at Random</title>
		<meta charset="utf-8" />


		<meta name="tags" content="octave" />
		<meta name="tags" content="lol" />
		<meta name="tags" content="imported" />

		<link rel=stylesheet/less type=text/css media=screen href="/theme/css/style.css" />
		<link rel=stylesheet type=text/css media=screen href="/theme/css/pygment.css" />
		<script src="/theme/js/less.min.js"></script>
	</head>

	<body>
		<div id=logo><div id=logo-wrapper>
			<header>
				<h1><a href="/"<span class=overbar><span class=big>t</span>hinking <span class=accent>at</span> <span class=big>r</span>andom</span></a></h1>
			</header>
			<nav>
				<ul>
					<li><a href="/">Writing</a></li>
					<li><a href="https://github.com/Matael">Github</a></li>
					<li><a href="https://matael.org">About</a></li>
				</ul>
			</nav>
		</div></div>
		<div id=page>
<section id=content>
	<header>
		<h1>Octave, dessine moi une spirale</h1>
		
	</header>
	<article>

	<div id=meta>
		<p class=by-line>Published by 
				<a href="/author/matael.html" class=author>matael</a>
		</p>
		<p>On <time datetime="2015-01-04T11:28:39+01:00">Sun 04 January 2015</span></p>
		<ul class=tags>
				<li><a href="/tag/octave.html">octave</a></li>
				<li><a href="/tag/lol.html">lol</a></li>
				<li><a href="/tag/imported.html">imported</a></li>
		</ul>
	</div>
	<div id=article_body>
		<p>Tout est parti d'un pari stupide avec mon voisin :</p>
<blockquote>
Le premier qui dessine une spirale sur octave a gagné</blockquote>
<p>A l'heure où j'écris ces lignes, je viens juste de réussir et de lui envoyer l'image.</p>
<p>Finalement, si le pari avait peu d'intérêt en soi, j'ai trouvé que c'était rigolo à faire.</p>
<div class="section" id="une-spirale-est-un-cercle-qui-s-est-oublie">
<h2>Une spirale est un cercle qui s'est oublié</h2>
<p>Quand on arrête de réfléchir deux minutes, on voit (normalement) qu'une spirale est juste un cercle très long dont le
rayon diminue.</p>
<p>Partant de là, on va d'abord essayer de tracer un cercle.</p>
<p>Sous octave on peut tracer un cercle assez facilement (à droite, le résultat) :</p>
<img alt="" class="align-right" src="/static/images/spirale/cercle.png" style="width: 450px;" />
<div class="highlight"><pre><span></span><span class="n">clear</span> <span class="n">all</span><span class="p">;</span>
<span class="n">close</span> <span class="n">all</span><span class="p">;</span>

<span class="c">% coordonnées du centre</span>
<span class="n">x</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">y</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c">% rayon</span>
<span class="n">r</span> <span class="p">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">t</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>

<span class="n">cercle_x</span> <span class="p">=</span> <span class="n">r</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span><span class="p">;</span>
<span class="n">cercle_y</span> <span class="p">=</span> <span class="n">r</span><span class="o">.*</span><span class="nb">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>

<span class="n">plot</span><span class="p">(</span><span class="n">cercle_x</span><span class="p">,</span><span class="n">cercle_y</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="convaincre-le-cercle-de-spiraler">
<h2>Convaincre le cercle de spiraler</h2>
<p>Maintenant qu'on a un cercle, il ne reste <em>plus qu'a</em> faire varier le rayon ;)</p>
<p>Un jeu d'enfant ;)</p>
<p>On a qu'à boucler sur un vecteur donnant le rayon (appelons le <tt class="docutils literal">r</tt>) et aligner nos coordonnées <tt class="docutils literal">cercle_x</tt> et <tt class="docutils literal">cercle_y</tt>
pour prendre en compte le rayon <em>en cours</em> à chaque point.</p>
<p>On remarque aussi que <tt class="docutils literal">t</tt> va de 0 à 2pi, ce qui suffit pour tracer un cercle or, une spirale est plus <em>&quot;longue&quot;</em> qu'un
cercle, il faudra donc prévoir un moyen de boucler aussi sur <tt class="docutils literal">t</tt> et de repartir à <tt class="docutils literal">t(1)</tt> à la fin des 100 points du
<tt class="docutils literal">linspace()</tt>.
Pour cela, on va rajouter une variable (je l'ai appellé <tt class="docutils literal">last</tt> ici) qui variera de 1 à 100 et que l'on utilisera en
indice pour le vecteur <tt class="docutils literal">t</tt>. Lorsque cette valeur atteint 100, on la repasse à 1 etc...</p>
<p>Enfin pour l'évolution du rayon on utilisera un simple <tt class="docutils literal">linspace()</tt> (ici, 300 valeurs entre 30 et 1).</p>
<div class="highlight"><pre><span></span><span class="n">clear</span> <span class="n">all</span><span class="p">;</span>
<span class="n">close</span> <span class="n">all</span><span class="p">;</span>

<span class="n">x</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">y</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">t</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>

<span class="n">cercle_x</span> <span class="p">=</span> <span class="p">[];</span>
<span class="n">cercle_y</span> <span class="p">=</span> <span class="p">[];</span>
<span class="n">last</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="n">r</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
    <span class="n">cercle_x</span> <span class="p">=</span> <span class="p">[</span><span class="n">cercle_x</span> <span class="p">[</span><span class="n">r</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">last</span><span class="p">))</span> <span class="o">+</span> <span class="n">x</span><span class="p">]];</span>
    <span class="n">cercle_y</span> <span class="p">=</span> <span class="p">[</span><span class="n">cercle_y</span> <span class="p">[</span><span class="n">r</span><span class="o">.*</span><span class="nb">sin</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">last</span><span class="p">))</span> <span class="o">+</span> <span class="n">y</span><span class="p">]];</span>
    <span class="k">if</span> <span class="n">last</span> <span class="o">==</span> <span class="mi">100</span>
        <span class="n">last</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">last</span> <span class="o">+</span><span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">endif</span>
<span class="n">endfor</span>

<span class="n">plot</span><span class="p">(</span><span class="n">cercle_x</span><span class="p">,</span><span class="n">cercle_y</span><span class="p">);</span>
<span class="n">title</span><span class="p">([</span>&quot;<span class="n">Just</span> <span class="n">a</span> <span class="n">beautiful</span> <span class="n">spiral</span> <span class="p">;)</span> <span class="p">[</span>&quot;  <span class="n">date</span><span class="p">()</span> &quot; <span class="o">-</span> &quot; <span class="n">num2str</span><span class="p">(</span><span class="n">clock</span><span class="p">()(</span><span class="mi">4</span><span class="p">))</span> &quot;<span class="p">:</span>&quot; <span class="n">num2str</span><span class="p">(</span><span class="n">clock</span><span class="p">()(</span><span class="mi">5</span><span class="p">))</span> &quot;<span class="p">]</span>&quot;<span class="p">]);</span>
</pre></div>
<p>Notez en même temps que j'ai inséré la date (certes, un peu à l'arrache) dans le titre de la figure.</p>
<p>A gauche, une spirale avec un nombre de points pour le vecteur de rayon trop faible, à droite, la spirale finale :</p>
<img alt="" class="align-left" src="/static/images/spirale/debut_spirale.png" style="width: 400px;" />
<img alt="" class="align-right" src="/static/images/spirale/spirale.png" style="width: 400px;" />
<p>Les images en plus grand peut être ?</p>
<ul class="simple">
<li>la <a class="reference external" href="/static/images/spirale/debut_spirale.png">gauche</a></li>
<li>la <a class="reference external" href="/static/images/spirale/spirale.png">droite</a></li>
</ul>
<p>Voilà donc.</p>
<p>Restera ensuite à faire une jolie fonction de tout ça et de la rendre paramétrable et on pourra (enfin) tracer des
spirales facilement !</p>
<p>Note: en zoomant, on apperçoit un petit <em>décrochage</em> dans la ligne (à droite), je pense qu'on pourrait gommer ça en
mettant plus de 100 points dans <tt class="docutils literal">t</tt></p>
</div>

	</article>
</section>
		</div>
		<div class=clear>&nbsp;</div>
		<footer>
			<p id=legal>Proudly powered by Pelican &mdash; 2017 &mdash; Mathieu (matael) Gaborit</p>
		</footer>
	</body>
</html>