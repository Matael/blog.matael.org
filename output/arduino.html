<!DOCTYPE html>
<html lang="en">
	<head>
			<title>Thinking at Random</title>
		<meta charset="utf-8" />


		<meta name="tags" content="arduino" />
		<meta name="tags" content="imported" />

		<link rel=stylesheet/less type=text/css media=screen href="/theme/css/style.css" />
		<link rel=stylesheet type=text/css media=screen href="/theme/css/pygment.css" />
		<script src="/theme/js/less.min.js"></script>
	</head>

	<body>
		<div id=logo><div id=logo-wrapper>
			<header>
				<h1><a href="/"<span class=overbar><span class=big>t</span>hinking <span class=accent>at</span> <span class=big>r</span>andom</span></a></h1>
			</header>
			<nav>
				<ul>
					<li><a href="/">Writing</a></li>
					<li><a href="https://github.com/Matael">Github</a></li>
					<li><a href="https://matael.org">About</a></li>
				</ul>
			</nav>
		</div></div>
		<div id=page>
<section id=content>
	<header>
		<h1>Arduino</h1>
		
	</header>
	<article>

	<div id=meta>
		<p class=by-line>Published by 
				<a href="/author/matael.html" class=author>matael</a>
		</p>
		<p>On <time datetime="2015-01-04T11:20:57+01:00">Sun 04 January 2015</span></p>
		<ul class=tags>
				<li><a href="/tag/arduino.html">arduino</a></li>
				<li><a href="/tag/imported.html">imported</a></li>
		</ul>
	</div>
	<div id=article_body>
		<p>Je vais vous parler de l'<strong>arduino</strong>, de ses possibilités, et par la
même occasion de programmes qui existent et qui peuvent être utiles pour
de l'électronique.</p>
<div class="section" id="keskece">
<h2>Keskecé ?</h2>
<p>L'<strong>arduino</strong> est une petite <strong>carte à microcontrôleur</strong> programmable et
OpenSource fabriquée par la marque éponyme <a class="reference external" href="http://www.arduino.cc">Arduino</a>.
Voilà quelques photos :</p>
<p><img alt="Vue de biais" src="/static/images/arduino/PIC_0001-1.JPG" style="width: 600px;" /> <img alt="Vue de dessus" src="/static/images/arduino/PIC_0038.JPG" style="width: 600px;" /> <img alt="Vue de dessous" src="/static/images/arduino/PIC_0040.JPG" style="width: 600px;" /> <img alt="Rabat intérieur du paquet" src="/static/images/arduino/PIC_0046.JPG" style="width: 600px;" /> <img alt="Manuel et stickers" src="/static/images/arduino/PIC_0043.JPG" style="width: 600px;" /></p>
<p>Cette carte, l'<strong>Arduino Uno</strong>, à l'<em>instar</em> de sa grande soeur
l'<strong>Arduino Duemilanove</strong>, mesure environ <strong>52x65mm</strong> (format
<em>&quot;standard&quot;</em> chez arduino). Cette carte, peut donc être programmée à
souhait au moyen d'un cable USB. Côté hardware, l'<strong>Arduino Uno</strong> est
équipée d'un microcontrôleur <strong>AVR</strong> de chez Atmel (l'<strong>atmega328p</strong>)
plutôt qu'un microcontrôleur PIC de microchip. Elle admet aussi une
alimentation autre grâce au <strong>connecteur jack</strong> dont elle est équipée ce
qui permet d'eviter les limitations de l'USB (besoin d'un PC pour n'en
citer qu'une). On remarque facilement sur la vue de dessus que l'arduino
est équipé de <strong>4 rangées de pins</strong> reliées comme il faut au
microcontroleur :</p>
<ul class="simple">
<li>En haut à gauche : les deux plus à gauche sont <strong>AREF</strong> et <strong>GND</strong> et
les suivantes les pins <strong>numériques 8 à 13</strong></li>
<li>En haut à droite : les pins <strong>numériques de 0 à 7</strong> (sachant que les
pins <strong>0 et 1 sont aussi RX et TX et que 2 et 3 sont Inter0 et
Inter1</strong>)</li>
<li>En bas à gauche : les pins relatives à <strong>l'alimentation et au
fonctionnement interne (RESET, 3.3V, 5V, GNDx2 et Vin)</strong></li>
<li>En bas à droite : les pins <strong>analogique de A0 à A5</strong></li>
</ul>
<p>Enfin, il faut savoir que la <strong>pin numérique 13 est reliée à une led</strong>
intégrée à la carte et que la <strong>pin RESET est reliée à GND</strong> via un
poussoir présent sur la carte.</p>
<p>Un autre atout majeur de l'<strong>arduino</strong> est son prix : cette carte ne
coute que <strong>25 EUR</strong> !! Ce qui en fait un outil génial pour apprendre un
peu et bidouiller beaucoup !</p>
</div>
<div class="section" id="programmer-la-bestiole">
<h2>Programmer la bestiole</h2>
<p>Le plus drole quand on a un nouveau joujou, c'est de l'utiliser... On va
donc voir un programme tout simple pour l'<strong>arduino</strong> : <strong>faire
clignoter la led associée à la pin 13</strong>.</p>
<div class="section" id="le-programme">
<h3>Le programme</h3>
<p>L'<strong>arduino</strong> se programme avec un langage très proche du C. Vous avez
deux moyens de coder pour l'arduino : soit avec le <a class="reference external" href="_http://arduino.cc/en/Main/Software">programme fourni par
arduino</a> soit avec votre éditeur
préféré (<strong>VIIIM !!!</strong>) en faisant toutefois attention au nom du dossier
et du fichier de code (en .pde), qui doivent être les mêmes :</p>
<div class="highlight"><pre><span></span>blink
+-- blink.pde
</pre></div>
<p>Rien de bien compliqué donc !</p>
<p>Voici maintenant à quoi ressemble le programme lui même :</p>
<div class="highlight"><pre><span></span><span class="c1">// On défini la pin de la led</span>
<span class="kt">int</span> <span class="n">ledPin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>

<span class="c1">// Cette fonction n&#39;est exécuté qu&#39;au démarrage de la carte ou</span>
<span class="c1">// lors d&#39;un RESET</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// On précise que la pin est utilisée en sortie</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Cette fonction sera exécuté en boucle</span>
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// On passe la pin en niveau haut</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="c1">// On attend un peu</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="c1">// On la met au niveau bas</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="c1">// On attend encore</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="c1">// et c&#39;est reparti pour un tour</span>
<span class="p">}</span>
</pre></div>
<p>Ce programme, largement commenté reste trivial, aussi, je ne vais pas
m'y attarder... Il est juste bon de savoir que le code minimal d'un
programme pour arduino se résume à :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
<p>Passé ceci, vous faites ce que vous voulez. A ce propos, vous pourrez
trouver la <a class="reference external" href="http://www.arduino.cc/en/Reference/HomePage">doc utile</a> ici sur le site
d'<strong>arduino</strong>.</p>
</div>
<div class="section" id="l-upload">
<h3>L'upload</h3>
<p>Reste maintenant à compiler ce programme et à l'uploader sur la carte.
Pour la compilation, c'est l'affaire d'<tt class="docutils literal"><span class="pre">avr-gcc</span></tt> et pour l'upload
celui d'<tt class="docutils literal">avrdude</tt>. Cette partie m'a posé pas mal de problème au début
: je hais l'IDE d'arduino aussi, je voulais <strong>uploader via la ligne de
commande</strong> pour n'avoir qu'a envoyer la commande depuis Vim. Mais là,
problème : l'upload via la ligne de commande plantait à tous les coups.
J'ai essayé plusieurs MakeFiles et Scons, mais pas moyen et puis je me
suis décidé à suivre <a class="reference external" href="https://wiki.archlinux.org/index.php/Arduino#Using_a_Makefile_instead_of_the_IDE">ces
instructions</a>
et là : <strong>No Problem</strong> ! Le programme s'est uploadé sans soucis et tout
à fonctionné parfaitement ! Voici donc le
<a class="reference external" href="/static/files/arduino/Makefile">MakeFile</a> &gt;`_ que j'ai utilisé pour compiler et
uploader la chose. Pour ceux qui les auraient oubliées, voici les
commandes qui vont bien :</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> /le/dossier/du/projet/
make
make upload
</pre></div>
<p>Et zou ! Tout fonctionne !</p>
</div>
</div>
<div class="section" id="deux-trois-trucs-cool">
<h2>Deux, trois trucs cool</h2>
<div class="section" id="planche-a-pain">
<h3>Planche à Pain !!</h3>
<p>Le premier s'appelle une <strong>plaque de prototypage</strong> (<em>breadboard</em> en
anglais, d'où le titre ;) ). Quand vous devez souvent changer de
montage, la soudure devient vite déconseillée :</p>
<ul class="simple">
<li>Longue</li>
<li>La chaleur abime les composants</li>
</ul>
<p>Aussi, vous pouvez vous procurer ceci :</p>
<p><img alt="Plaque de proto" src="/static/images/arduino/SL271969.JPG" style="width: 600px;" />
Celle ci est cablée et c'est une 840 trous à 2 BUS. Largement suffisant
pour des circuits de base. Ce genre de plaque coûte une dizaine d'euros</p>
</div>
<div class="section" id="software">
<h3>Software</h3>
<p>Deux softwares plutôt sympa pour l'electronique :
<a class="reference external" href="http://sourceforge.net/projects/ktechlab/">KTechLab</a> et
<a class="reference external" href="http://fritzing.org/">Fritzing Alpha</a>.</p>
<p>Le premier fait pleins de trucs allants de la programmation Flowcode au
Schéma PCB (<em>Printed Circuit Board</em>) en passant par de la schématisation
pure. L'autre fait juste les schémas breadboard, et les PCB, mais les
fait bien !</p>
</div>
<div class="section" id="hardware">
<h3>Hardware</h3>
<p>Pour ceux qui serait extrèmement attachés à Microchip ou qui
préfèreraient le <em>Basic</em> au <em>C</em>, il exsite une carte équipée d'un <strong>PIC
18F25K20</strong> de Microchip. Cette board est développée par <a class="reference external" href="http://www.crownhill.co.uk">Crownhill
Associates Limited</a> et répond au nom
d'<a class="reference external" href="http://www.myamicus.co.uk/">Amicus 18</a>. Voilà donc pour ce qui
est des microcontrôleurs alternatifs...</p>
<p>Reste quand même à vous dire que des clones d'<strong>arduino</strong> ont fait leur
apparition : <a class="reference external" href="http://www.freeduino.org">Freeduino</a>,
<a class="reference external" href="http://netduino.com/">Netduino</a>,
<a class="reference external" href="http://www.adafruit.com/category/19">Boarduino</a>,...</p>
<p>Cette dernière est d'ailleurs fabricable soi-même sans trop de
difficultées.</p>
</div>
</div>

	</article>
</section>
		</div>
		<div class=clear>&nbsp;</div>
		<footer>
			<p id=legal>Proudly powered by Pelican &mdash; 2017 &mdash; Mathieu (matael) Gaborit</p>
		</footer>
	</body>
</html>