<!DOCTYPE html>
<html lang="en">
	<head>
			<title>Thinking at Random</title>
		<meta charset="utf-8" />


		<meta name="tags" content="processing" />
		<meta name="tags" content="imported" />

		<link rel=stylesheet/less type=text/css media=screen href="/theme/css/style.css" />
		<link rel=stylesheet type=text/css media=screen href="/theme/css/pygment.css" />
		<script src="/theme/js/less.min.js"></script>
	</head>

	<body>
		<div id=logo><div id=logo-wrapper>
			<header>
				<h1><a href="/"<span class=overbar><span class=big>t</span>hinking <span class=accent>at</span> <span class=big>r</span>andom</span></a></h1>
			</header>
			<nav>
				<ul>
					<li><a href="/">Writing</a></li>
					<li><a href="https://github.com/Matael">Github</a></li>
					<li><a href="https://matael.org">About</a></li>
				</ul>
			</nav>
		</div></div>
		<div id=page>
<section id=content>
	<header>
		<h1>Processing</h1>
		
	</header>
	<article>

	<div id=meta>
		<p class=by-line>Published by 
				<a href="/author/matael.html" class=author>matael</a>
		</p>
		<p>On <time datetime="2015-01-04T11:20:58+01:00">Sun 04 January 2015</span></p>
		<ul class=tags>
				<li><a href="/tag/processing.html">processing</a></li>
				<li><a href="/tag/imported.html">imported</a></li>
		</ul>
	</div>
	<div id=article_body>
		<p>Un nouveau langage, de nouvelles possibilités, un peu <em>&quot;d'art&quot;</em> et pas
mal de trucs marrants en perspective...</p>
<p>Quand j'ai reçu mon arduino, j'ai entendu parler d'un soft appellé
<strong>processing</strong> et qui, selon ce que j'en savais permettait d'interagir
avec l'arduino et de produire des images.</p>
<div class="section" id="id1">
<h2>Processing</h2>
<p>Récement (la semaine dernière en fait), je me suis penché sur le sujet,
un peu (beaucoup ?) pour le fun et parce que ce truc m'intriguait. De
mes investigations, j'en a ressorti que <strong>processing</strong> n'était pas
simplement un &quot;<em>soft permettant d'interagir avec l'arduino&quot;</em> mais aussi
et surtout un langage de programmation à part entière permettant le
rendu d'images (avec où sans l'arduino).</p>
<div class="section" id="qui">
<h3>Qui</h3>
<p><strong>Processing</strong> a été créé par <a class="reference external" href="http://processing.org/about/people/">une petite équipe de
volontaires</a>. D'après <a class="reference external" href="http://processing.org/">leur
site</a> il y aurait un joli paquet (ils disent
<em>ten thousand</em>) d'étudiants, artistes, designers, chercheurs, et autres
passionnés qui l'utilisent.</p>
</div>
<div class="section" id="quoi">
<h3>Quoi</h3>
<p>Processing est un langage complet permettant la génération d'images et
vidéos en 2D/3D. Il dispose d'un IDE créé par les auteurs (rappellant
énormément celui de l'arduino) et de fonctionnalité d'export en applet
(pages web), pdf, png, et autres...</p>
</div>
</div>
<div class="section" id="un-langage">
<h2>Un langage</h2>
<p>Comme tout langage de programmation (et en général) <strong>processing</strong>
demande un apprentissage. Fort heureusement, il reste relativement
classique et sans grande surprise.</p>
<p>Notons toutefois l'étrange tête qu'a une création de tableau :</p>
<div class="highlight"><pre><span></span><span class="c1">// créons un tableau de 42 entiers</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">tab1</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">42</span><span class="o">];</span>

<span class="c1">// la même, mais en l&#39;initialisant</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">tab2</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">13</span><span class="o">};</span>

<span class="c1">// enfin, une création de tableau 2D</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">tab3</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">42</span><span class="o">][</span><span class="mi">3</span><span class="o">];</span>
</pre></div>
<p>C'est pour l'instant la seule chose qui m'ait semblée vraiment étrange.</p>
<p>Les programmes <strong>processing</strong> sont stockés dans des fichiers <strong>.pde</strong>...
commme pour l'arduino. Coïncidence ?</p>
<p>Non, mais j'avais mieux à faire que de cherche une réponse.</p>
<div class="section" id="structure-de-base-d-un-programme">
<h3>Structure de base d'un programme</h3>
<p>La structure la plus basique d'un programme est d'écrire directement les
lignes les unes à la suite des autres...</p>
<p>Si on veut quelque chose d'un peu plus ordonné, on peut utiliser le
squelette suivant :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="c1">// instructions exécutées en premier</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="c1">// le graphe est généré à la fin de cette fonction</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="compilation">
<h3>Compilation</h3>
<p>Il semble que <strong>processing</strong> soit un langage compilé. Ok, no blem...
seulement, il faudra que je me penche sérieusement sur la compilation
depuis la ligne de commande (leur IDE est semblable à celui d'arduino
sur ce point, il est imbuvable).</p>
</div>
</div>
<div class="section" id="deux-exemples">
<h2>Deux exemples</h2>
<p>Pour l'instant, j'essaye de me dépatouiller en partant de zéro.</p>
<p>Les trois programmes suivants sont simples :</p>
<ul class="simple">
<li>un classique <em>Hello World</em></li>
<li>un truc qui dessine des ellispes sous le pointeur</li>
<li>un truc qui trace des points random et les relie par une ligne au
centre</li>
</ul>
<div class="section" id="hello-world">
<h3>Hello world</h3>
<p>Le programme est suffisament commenté pour être facilement
compréhensible :</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
        <span class="c1">// size règle les valeurs des variables globales</span>
        <span class="c1">// height et width. Cela donne la taille de la zone de dessin</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span>
        <span class="c1">// couleur du background (0 -&gt; noir, 255 -&gt; blanc)</span>
    <span class="n">background</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="c1">// couleur du pointeur courant</span>
    <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
        <span class="c1">// affichage du Hello World!</span>
        <span class="c1">// text(string txt, int pos_x, int pos_y);</span>
    <span class="n">text</span><span class="o">(</span><span class="s">&quot;Hello world!&quot;</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
<p>Notez que les fonctions <tt class="docutils literal">stroke</tt>, <tt class="docutils literal">background</tt> et <tt class="docutils literal">fill</tt>
permettent de spécifier aussi des couleurs en code hexa.</p>
<p>Pour lancer ce programme, copiez le dans l'IDE et appuyez sur <em>CTRL-R</em>
(ou le bouton play hein...).</p>
</div>
<div class="section" id="hello-mouse">
<h3>Hello Mouse</h3>
<p>La réaction à la souris est super simple</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">650</span><span class="o">,</span><span class="mi">500</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">mousePressed</span><span class="o">){</span> <span class="c1">// si le bouton de la souris est appuyé</span>
        <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// on passe en noir</span>
        <span class="c1">// et on dessine une ellipse horizontale</span>
        <span class="n">ellipse</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span> <span class="n">mouseY</span><span class="o">,</span> <span class="mi">80</span><span class="o">,</span><span class="mi">40</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span> <span class="c1">// sinon</span>
        <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span> <span class="c1">// on passe en blanc</span>
        <span class="c1">// et on dessine une ellipse verticale</span>
        <span class="n">ellipse</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span> <span class="n">mouseY</span><span class="o">,</span> <span class="mi">40</span><span class="o">,</span><span class="mi">80</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="l-etoile">
<h3>L'étoile</h3>
<p>Là c'est un peu plus velu, le code est tout de même suffisament commenté
pour que ce soit compréhensible :</p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nb_points</span> <span class="o">=</span> <span class="mi">142</span><span class="o">;</span>    <span class="c1">// nombre de points à tracer</span>
<span class="kt">int</span> <span class="n">size_of_points</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// taille x et y d&#39;un point</span>
<span class="kt">boolean</span> <span class="n">first</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>   <span class="c1">// premiere iteration de la boucle</span>
<span class="kt">float</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">;</span>              <span class="c1">// coordonnée du point courant</span>
<span class="kt">int</span> <span class="n">nb_passages</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>    <span class="c1">// compteur -&gt; nb_points</span>


<span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="c1">// initialisation de la zone de dessin</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">542</span><span class="o">,</span> <span class="mi">542</span><span class="o">);</span>      <span class="c1">// taille de la zone</span>
    <span class="n">background</span><span class="o">(</span><span class="err">#</span><span class="mi">1</span><span class="n">C1C1C</span><span class="o">);</span> <span class="c1">// couleur du BG</span>
    <span class="n">stroke</span><span class="o">(</span><span class="err">#</span><span class="mo">064</span><span class="n">C90</span><span class="o">);</span>     <span class="c1">// couleur des lignes</span>
    <span class="n">fill</span><span class="o">(</span><span class="err">#</span><span class="mo">064</span><span class="n">C90</span><span class="o">);</span>       <span class="c1">// couleur des ellipses</span>

    <span class="c1">// la fonction draw() doit être exécutée en boucle</span>
    <span class="n">loop</span><span class="o">();</span>
<span class="o">}</span>


<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="c1">// si on est à la premiere itération</span>
    <span class="k">if</span><span class="o">(</span><span class="n">first</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// traçage de l&#39;ellipse centrale</span>
        <span class="n">ellipse</span><span class="o">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">size_of_points</span><span class="o">,</span> <span class="n">size_of_points</span><span class="o">);</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// définition des points</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">nb_passages</span> <span class="o">&lt;=</span> <span class="n">nb_points</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">542</span><span class="o">);</span> <span class="c1">// abscisses</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">542</span><span class="o">);</span> <span class="c1">// ordonnées</span>

        <span class="c1">// on trace le point...</span>
        <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">size_of_points</span><span class="o">,</span> <span class="n">size_of_points</span><span class="o">);</span>
        <span class="c1">// et la ligne.</span>
        <span class="n">line</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">);</span>
        <span class="n">nb_passages</span><span class="o">++;</span>
    <span class="o">}</span>
    <span class="c1">// on attend un peu, c&#39;est joli</span>
    <span class="n">delay</span><span class="o">(</span><span class="mi">25</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="la-version-qui-bouge">
<h3>La version qui bouge</h3>
<p>Enfin, le bonus du jour, une version qui bouge :</p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nb_points</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>    <span class="c1">// le nombre de points</span>
<span class="kt">int</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span>           <span class="c1">// combien de points à rafraichir</span>
<span class="kt">boolean</span> <span class="n">first</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>   <span class="c1">// premiere ité de la boucle</span>
<span class="kt">int</span> <span class="n">ellipse_size</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>   <span class="c1">// taille d&#39;un point</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">points</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">nb_points</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span> <span class="c1">// tableau de points</span>

<span class="c1">// initialisation des points</span>
<span class="kt">void</span> <span class="nf">init_points</span><span class="o">(){</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="n">nb_points</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
        <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="n">height</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
    <span class="o">};</span>
<span class="o">}</span>

<span class="c1">// redessiner l&#39;image</span>
<span class="kt">void</span> <span class="nf">redraw_frame</span><span class="o">(){</span>
    <span class="n">background</span><span class="o">(</span><span class="err">#</span><span class="mi">101010</span><span class="o">);</span> <span class="c1">// couleur du bg</span>

    <span class="c1">// centre</span>
    <span class="n">ellipse</span><span class="o">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">ellipse_size</span><span class="o">,</span> <span class="n">ellipse_size</span><span class="o">);</span>

    <span class="c1">// points and lines</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="n">nb_points</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="n">ellipse</span><span class="o">(</span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">],</span> <span class="n">ellipse_size</span><span class="o">,</span> <span class="n">ellipse_size</span><span class="o">);</span>
        <span class="n">line</span><span class="o">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// modifier des points au pif dans le tableau</span>
<span class="kt">void</span> <span class="nf">modify_points</span><span class="o">(){</span>
    <span class="kt">int</span> <span class="n">start_point</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">nb_points</span><span class="o">-</span><span class="n">step</span><span class="o">));</span>
    <span class="kt">int</span> <span class="n">end_point</span> <span class="o">=</span> <span class="n">start_point</span> <span class="o">+</span> <span class="n">step</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">start_point</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">end_point</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
        <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
        <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">height</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
    <span class="n">size</span><span class="o">(</span><span class="mi">600</span><span class="o">,</span><span class="mi">600</span><span class="o">);</span>
    <span class="n">stroke</span><span class="o">(</span><span class="err">#</span><span class="mo">00225</span><span class="mi">9</span><span class="o">);</span>
    <span class="n">fill</span><span class="o">(</span><span class="err">#</span><span class="mo">064</span><span class="n">C90</span><span class="o">);</span>
    <span class="n">loop</span><span class="o">();</span>
<span class="o">}</span>


<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">first</span><span class="o">){</span>
        <span class="n">init_points</span><span class="o">();</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">redraw_frame</span><span class="o">();</span>
    <span class="n">modify_points</span><span class="o">();</span>
    <span class="n">delay</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p><strong>Processing</strong> semble intéressant pour pas mal de choses. Il reste très
facile à prendre en main et proche des autres langages.</p>
<p>Sous peu j'essaierais d'utiliser les fonctions de plot 3D pour voir à
quel point on peut pousser la chose. De même, j'aimerais tenter l'export
video et pdf et l'import video/photo.</p>
<p>Enfin, il serait sympa de pouvoir générer des graphes plus poussés et de
gérer I/O clavier et arduino.</p>
<p>A plus tard, pour de nouvelles aventures !</p>
</div>

	</article>
</section>
		</div>
		<div class=clear>&nbsp;</div>
		<footer>
			<p id=legal>Proudly powered by Pelican &mdash; 2017 &mdash; Mathieu (matael) Gaborit</p>
		</footer>
	</body>
</html>